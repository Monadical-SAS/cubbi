name: claude
description: Claude Code CLI container for AI-assisted development
version: 1.0.0
maintainer: team@monadical.com
image: monadical/cubbi-claude:latest

init:
  pre_command: /cubbi-init.sh
  command: /entrypoint.sh

environment:
  - name: ANTHROPIC_API_KEY
    description: Anthropic API key for Claude CLI
    required: false
    sensitive: true

  - name: CUBBI_PROJECT_URL
    description: Project repository URL
    required: false

  - name: CUBBI_PROJECT_TYPE
    description: Project repository type (git, svn, etc.)
    required: false
    default: git

  - name: CUBBI_GIT_SSH_KEY
    description: SSH key for Git authentication
    required: false
    sensitive: true

  - name: CUBBI_GIT_TOKEN
    description: Token for Git authentication
    required: false
    sensitive: true

ports:
  - 22 # SSH server

volumes:
  - mountPath: /app
    description: Application directory

persistent_configs:
  - source: "/home/cubbi/.config/claude"
    target: "/cubbi-config/claude-config"
    type: "directory"
    description: "Claude configuration"