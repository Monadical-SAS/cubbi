name: crush
description: Crush AI coding assistant environment
version: 1.0.0
maintainer: team@monadical.com
image: monadical/cubbi-crush:latest

init:
  pre_command: /cubbi-init.sh
  command: /entrypoint.sh

environment:
  - name: OPENAI_API_KEY
    description: OpenAI API key for crush
    required: false
    sensitive: true

  - name: ANTHROPIC_API_KEY
    description: Anthropic API key for crush
    required: false
    sensitive: true

  - name: GROQ_API_KEY
    description: Groq API key for crush
    required: false
    sensitive: true

  - name: OPENAI_URL
    description: Custom OpenAI-compatible API URL
    required: false

  - name: CUBBI_MODEL
    description: AI model to use with crush
    required: false

  - name: CUBBI_PROVIDER
    description: AI provider to use with crush
    required: false

ports:
  - 8000

volumes:
  - mountPath: /app
    description: Application directory

persistent_configs:
  - source: "/home/cubbi/.config/crush"
    target: "/cubbi-config/crush-config"
    type: "directory"
    description: "Crush configuration directory"
  - source: "/app/.crush"
    target: "/cubbi-config/crush-app"
    type: "directory"
    description: "Crush application data and sessions"